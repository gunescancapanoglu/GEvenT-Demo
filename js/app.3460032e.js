(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[0],{0:function(e,t,n){e.exports=n("2f39")},"0047":function(e,t,n){},"2f39":function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"checkLivePosition",(function(){return R}));var o={};n.r(o),n.d(o,"setUserPosition",(function(){return J})),n.d(o,"setWatchPositionId",(function(){return q})),n.d(o,"updateLivePositionTracking",(function(){return H})),n.d(o,"updateLiveViewTracking",(function(){return $})),n.d(o,"updatePoIEditing",(function(){return z})),n.d(o,"updateSubscription",(function(){return K})),n.d(o,"setBounds",(function(){return Y})),n.d(o,"setGeohashesAndPrecision",(function(){return X})),n.d(o,"resetGeohashes",(function(){return Z}));var i={};n.r(i),n.d(i,"checkGeolocationAvailability",(function(){return ee})),n.d(i,"setPositionIDAndCreatePositionListener",(function(){return te})),n.d(i,"resetPositionIDGeohashesPrecisionAndDeletePositionListener",(function(){return ne}));var a={};n.r(a),n.d(a,"PoIsIdList",(function(){return ie}));var s={};n.r(s),n.d(s,"addPoIs",(function(){return ae})),n.d(s,"removePoIs",(function(){return se})),n.d(s,"addPoIToDatabase",(function(){return ce})),n.d(s,"removePoIFromDatabase",(function(){return ue}));var c=n("967e"),u=n.n(c),f=(n("a481"),n("96cf"),n("fa84")),l=n.n(f),d=(n("985d"),n("0047"),n("2b0e")),p=n("1f91"),h=n("b05d"),m=n("9989"),v=n("4d5a"),b=n("09e3"),P=n("9c40"),g=n("de5e"),w=n("05c0"),k=n("0016"),I=n("2a19"),O=n("f508");d["a"].use(h["a"],{config:{},lang:p["a"],components:{QPage:m["a"],QLayout:v["a"],QPageContainer:b["a"],QBtn:P["a"],QPageSticky:g["a"],QTooltip:w["a"],QIcon:k["a"]},plugins:{Notify:I["a"],Loading:O["a"]}});var y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"q-app"}},[n("router-view"),n("Notify")],1)},L=[],U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},j=[],D=(n("8e6e"),n("8a81"),n("ac6a"),n("cadf"),n("06db"),n("456d"),n("6762"),n("2fdb"),n("c47a")),M=n.n(D),E=n("2f62");function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){M()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x={name:"Notify",computed:N({},Object(E["d"])(["Notifies"])),watch:{Notifies:function(e,t){var n=this;e.filter((function(e){return!t.includes(e)})).forEach((function(e){return n.$q.notify({type:e.type,icon:n.Icons.mdiAlertCircleOutline,progress:!0,message:e.Notify.message,closeBtn:!0})})),e.length&&this.resetNotifies()}},methods:N({},Object(E["c"])(["resetNotifies"]))},T=x,C=n("2877"),V=Object(C["a"])(T,U,j,!1,null,null,null),A=V.exports,S={name:"App",components:{Notify:A}},B=S,W=Object(C["a"])(B,y,L,!1,null,null,null),_=W.exports,F={state:{Notifies:[]},mutations:{addNotifies:function(e,t){e.Notifies=e.Notifies.concat(t)},resetNotifies:function(e){e.Notifies=[]}}},Q=function(){return{WatchPositionId:null,Position:{lat:null,lng:null},Bounds:{south:null,west:null,north:null,east:null},Geohashes:[],Precision:null,GeolocationAvailable:!!navigator.geolocation,LivePositionTracking:!1,LiveViewTracking:!1,PoIEditing:!1,Subscription:!1}};function R(e){return e.LivePositionTracking&&!!e.Position.lat&&!!e.Position.lng}function J(e,t){e.Position=t}function q(e,t){e.WatchPositionId=t}function H(e,t){e.LivePositionTracking=t}function $(e,t){e.LiveViewTracking=t}function z(e,t){e.PoIEditing=t}function K(e,t){e.Subscription=t}function Y(e,t){e.Bounds=t}function X(e,t){e.Precision=t.precision,e.Geohashes=t.bboxes}function Z(e){e.Geohashes=[]}function ee(e){var t=e.commit,n=e.state;n.GeolocationAvailable||t("addNotifies",[{Notify:new Error("Location is not supported by this browser/device."),type:"warning"}],{root:!0})}function te(e){var t=e.commit,n=e.state;t("setWatchPositionId",navigator.geolocation.watchPosition((function(e){var r=e.coords,o=r.latitude,i=r.longitude;n.Position.lat===o&&n.Position.lng===i||t("setUserPosition",{lat:o,lng:i})}),(function(e){var n="",r="";switch(t("updateLivePositionTracking",!1),e.code){case e.PERMISSION_DENIED:n="User denied the request for location.",r="warning";break;case e.POSITION_UNAVAILABLE:n="Your browser/device could not provide location.",r="warning";break;case e.TIMEOUT:n="The request to get location timed out.",r="negative";break;case e.UNKNOWN_ERROR:n="An unknown error occurred while trying to get location.",r="negative";break}t("addNotifies",[{Notify:new Error(n),type:r}],{root:!0})}),{enableHighAccuracy:!0}))}function ne(e){var t=e.commit,n=e.state;navigator.geolocation.clearWatch(n.WatchPositionId),t("setUserPosition",{lat:null,lng:null}),t("setWatchPositionId",null),t("resetGeohashes")}var re={namespaced:!0,state:Q,getters:r,mutations:o,actions:i},oe=function(){return{PoIs:[],AddPoIToDatabase:{},RemovePoIFromDatabase:{}}};function ie(e){return e.PoIs.map((function(e){var t=e.Id;return t}))}function ae(e,t){e.PoIs=e.PoIs.concat(t)}function se(e,t){e.PoIs=e.PoIs.filter((function(e){var n=e.Id;return!t.includes(n)}))}function ce(e,t){e.AddPoIToDatabase=t}function ue(e,t){e.RemovePoIFromDatabase=t}var fe=n("8832"),le={namespaced:!0,state:oe,getters:a,mutations:s,actions:fe},de=(n("28a5"),n("f3e3")),pe=n.n(de),he=(n("ffc1"),n("7514"),n("c5f6"),n("e02a")),me={1:[23,23],2:[2.8,5.6],3:[.7,.7],4:[.087,.18],5:[.022,.022],6:[.0027,.0055],7:[68e-5,68e-5],8:[85e-6,17e-5]},ve=Object.keys(me).reduce((function(e,t){return Math.min(Number(e),Number(t))}));function be(e){var t=e.south,n=e.north,r=e.west,o=e.east,i=Math.abs(t-n),a=Math.abs(r-o),s=Object.entries(me).reverse().find((function(e){var t=pe()(e,2),n=pe()(t[1],2),r=n[0],o=n[1];return 2*r>=i&&2*o>=a}));return s?s[0]:ve}var Pe=function(e){e.registerModule("Geohash",{getters:{DecodeGeohashToBounds:function(){return function(e){return Object(he["decode_bbox"])(e)}},GetGeohashesFromPoint:function(){return function(e,t){return Object(he["encode"])(e,t,ve).split("").reduce((function(e,t,n){return e[n+1]=0!==n?e[n]+t:t,e}),{})}}}}),e.watch((function(e){return e.User.Bounds}),(function(t){var n=be(t);e.commit("User/setGeohashesAndPrecision",{bboxes:Object(he["bboxes"])(t.south,t.west,t.north,t.east,n),precision:n})}))},ge=(n("6b54"),n("59ca")),we=n.n(ge);n("e71f");function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){M()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oe=we.a.initializeApp({apiKey:"AIzaSyCaykC5gM4w33P9k3pIF-OohrE5JyVgPcw",authDomain:"gevent-270214.firebaseapp.com",databaseURL:"https://gevent-270214.firebaseio.com",projectId:"gevent-270214",storageBucket:"gevent-270214.appspot.com",messagingSenderId:"545035347256",appId:"1:545035347256:web:715c3c0047e80161868dcd"}).firestore(),ye={Geohashes:[]},Le=function(e){e.watch((function(e){return e.User.Geohashes}),(function(t){var n=ye.Geohashes.filter((function(e){var n=e.Hash;return!t.includes(n)}));n.forEach((function(e){e.Unsubscribe(),ye.Geohashes.splice(ye.Geohashes.indexOf(e),1)}));var r=e.state.PoIs.PoIs.filter((function(n){return!t.includes(n[e.state.User.Precision])})).map((function(e){var t=e.Id;return t}));r.length&&e.commit("PoIs/removePoIs",r),t.filter((function(e){return!ye.Geohashes.map((function(e){var t=e.Hash;return t})).includes(e)})).forEach((function(t){return ye.Geohashes.push({Hash:t,Unsubscribe:Oe.collection("PoIs").where(e.state.User.Precision.toString(),"==",t).onSnapshot((function(t){var n=[],r=[],o=[];t.docChanges().forEach((function(e){var t=e.doc.data();switch(t=Ie({Id:e.doc.id,lat:t.position.latitude,lng:t.position.longitude},t),e.type){case"added":n.push(t);break;case"modified":r.push(t);break;case"removed":o.push(t.Id);break}})),n=n.filter((function(t){var n=t.Id;return!e.getters["PoIs/PoIsIdList"].includes(n)})),n.length>0&&e.commit("PoIs/addPoIs",n),o.length>0&&e.commit("PoIs/removePoIs",o)}))})}))})),e.watch((function(e){return e.PoIs.AddPoIToDatabase}),(function(t){var n=t.lat,r=t.lng;Oe.collection("PoIs").doc().set(Ie({position:new we.a.firestore.GeoPoint(n,r)},e.getters.GetGeohashesFromPoint(n,r)))})),e.watch((function(e){return e.PoIs.RemovePoIFromDatabase}),(function(e){Oe.collection("PoIs").doc(e).delete()}))},Ue=function(e){e.watch((function(e){return e.User.LivePositionTracking}),(function(t){t?e.dispatch("User/setPositionIDAndCreatePositionListener"):e.dispatch("User/resetPositionIDGeohashesPrecisionAndDeletePositionListener"),e.commit("User/updateLiveViewTracking",t)}))};function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){M()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}d["a"].use(E["a"]);var Me=function(){var e=new E["a"].Store({state:De({},F.state),mutations:De({},F.mutations),modules:{User:re,PoIs:le},plugins:[Pe,Le],strict:!1});return Ue(e),e},Ee=n("8c4f"),Ge=[{path:"/",component:function(){return n.e(3).then(n.bind(null,"713b"))},children:[{path:"",component:function(){return n.e(5).then(n.bind(null,"8b24"))}}]}];Ge.push({path:"*",component:function(){return n.e(4).then(n.bind(null,"e51e"))}});var Ne=Ge;d["a"].use(Ee["a"]);var xe=function(){var e=new Ee["a"]({scrollBehavior:function(){return{x:0,y:0}},routes:Ne,mode:"history",base:"/GEvenTDemo/"});return e},Te=function(){return Ce.apply(this,arguments)};function Ce(){return Ce=l()(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("function"!==typeof Me){e.next=6;break}return e.next=3,Me({Vue:d["a"]});case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=Me;case 7:if(t=e.t0,"function"!==typeof xe){e.next=14;break}return e.next=11,xe({Vue:d["a"],store:t});case 11:e.t1=e.sent,e.next=15;break;case 14:e.t1=xe;case 15:return n=e.t1,t.$router=n,r={el:"#q-app",router:n,store:t,render:function(e){return e(_)}},e.abrupt("return",{app:r,store:t,router:n});case 19:case"end":return e.stop()}}),e)}))),Ce.apply(this,arguments)}var Ve=n("3400"),Ae=1e3,Se={},Be={},We={},_e=[],Fe={},Qe={},Re={},Je=function(){var e=l()(u.a.mark((function e(t,n,r){var o;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Qe=n,Re=r,e.next=4,window.initPromiseGoogleMaps;case 4:Se=e.sent,Be=new Se.maps.Map(t,{disableDefaultUI:!0,zoom:2,center:{lat:0,lng:0},clickableIcons:!1}),o=new Se.maps.GroundOverlay("statics/handsome.png",{north:38.2,south:38.19988,east:26.74,west:26.7395},{clickable:!1}),o.setMap(Be),We=new Se.maps.Marker({map:Be,position:{lat:0,lng:0},visible:!1,clickable:!1,icon:{anchor:new Se.maps.Point(12.5,22.5),path:Qe.UserMarkerIcon,fillColor:Re.MarkerColor,fillOpacity:1,scale:.75,strokeColor:"white",strokeWeight:2,strokeOpacity:.8}}),Fe=new Ve["a"](Be,[],{averageCenter:!0,ignoreHidden:!0,imagePath:"statics/map_icons/m"});case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),qe=function(e){var t=e.store,n=e.Vue,r=function(){if(t.getters["User/checkLivePosition"]){var e=function(e){return Se.maps.geometry.spherical.computeOffset(new Se.maps.LatLng(t.state.User.Position),Ae,e)};t.commit("User/setBounds",{south:e(180).lat(),west:e(270).lng(),north:e(0).lat(),east:e(90).lng()})}else t.commit("User/setBounds",Be.getBounds().toJSON())},o=function(e){return!t.getters["User/checkLivePosition"]||Se.maps.geometry.spherical.computeDistanceBetween(new Se.maps.LatLng(t.state.User.Position),new Se.maps.LatLng(e))<=Ae};t.watch((function(e){return e.User.Position}),(function(e){t.getters["User/checkLivePosition"]?(r(),We.setPosition(e),We.setVisible(!0)):We.setVisible(!1);var n=t.getters["User/checkLivePosition"]?_e.filter((function(e){var t=e.Marker;return o(t.getPosition().toJSON())})):_e;_e.forEach((function(e){var t=n.includes(e);t!==e.Marker.getVisible()&&e.Marker.setVisible(t)})),Fe.repaint()})),t.watch((function(e){return e.User.Bounds}),(function(e){t.state.User.LiveViewTracking&&Be.fitBounds(e,0)})),t.watch((function(e){return e.User.LiveViewTracking}),(function(e){e?(t.getters["User/checkLivePosition"]&&Be.fitBounds(t.state.User.Bounds,0),Be.addListener("dragstart",(function(){return t.commit("User/updateLiveViewTracking",!1)})),Be.addListener("dblclick",(function(){return t.commit("User/updateLiveViewTracking",!1)})),Se.maps.event.addDomListener(Be.getDiv(),"mousewheel",(function(){return t.commit("User/updateLiveViewTracking",!1)})),Fe.addListener("click",(function(){return t.commit("User/updateLiveViewTracking",!1)}))):(Se.maps.event.clearListeners(Be,"dblclick"),Se.maps.event.clearListeners(Be,"dragstart"),Se.maps.event.clearListeners(Be.getDiv(),"mousewheel"),Se.maps.event.clearListeners(Fe,"click"))})),t.watch((function(e){return e.User.PoIEditing}),(function(e){e?Be.addListener("click",(function(e){var n=e.latLng;t.commit("PoIs/addPoIToDatabase",n.toJSON())})):Se.maps.event.clearListeners(Be,"click"),_e.forEach((function(t){var n=t.Marker;return n.setClickable(e)}))})),t.watch((function(e){return e.PoIs.PoIs}),(function(e){var n=_e.map((function(e){var t=e.Id;return t})),r=e.filter((function(e){var t=e.Id;return!n.includes(t)}));r.length&&(_e=_e.concat(r.map((function(e){var n=new Se.maps.Marker({map:Be,position:e,visible:!t.getters["User/checkLivePosition"]||o(e),clickable:t.state.User.PoIEditing,icon:{anchor:new Se.maps.Point(12.5,22.5),path:Qe.MarkerIcon,fillColor:Re.MarkerColor,fillOpacity:1,scale:1.5,strokeColor:"white",strokeWeight:2,strokeOpacity:.8}});return n.addListener("click",(function(){t.commit("PoIs/removePoIFromDatabase",e.Id)})),Fe.addMarker(n),{Id:e.Id,Marker:n}}))));var i=n.filter((function(e){return!t.getters["PoIs/PoIsIdList"].includes(e)}));if(i.length){var a=_e.filter((function(e){var t=e.Id;return i.includes(t)}));a.forEach((function(e){var t=e.Marker;Se.maps.event.clearListeners(t,"click"),Fe.removeMarker(t)})),a.forEach((function(e){var t=e.Marker;return t.setMap(null)}));var s=a.map((function(e){var t=e.Id;return t}));_e=_e.filter((function(e){var t=e.Id;return!s.includes(t)}))}})),t.watch((function(e){return e.User.Subscription}),(function(e){return e?r():t.commit("User/resetGeohashes")})),n.prototype.$createMap=Je},He=n("bc78"),$e=n("e519"),ze=function(){var e=l()(u.a.mark((function e(t){var n;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.Vue,n.mixin({beforeCreate:function(){this.Colors={Primary:He["a"].getBrand("primary")},this.Icons={mdiCircle:$e["c"],mdiMapMarker:$e["h"],mdiCancel:$e["b"],mdiTargetVariant:$e["k"],mdiMapMarkerPlusOutline:$e["j"],mdiMapMarkerMinusOutline:$e["i"],mdiLockOutline:$e["g"],mdiLockOpenVariantOutline:$e["f"],mdiCrosshairsGps:$e["e"],mdiCrosshairs:$e["d"],mdiAlertCircleOutline:$e["a"]}}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ke(){return Ye.apply(this,arguments)}function Ye(){return Ye=l()(u.a.mark((function e(){var t,n,r,o,i,a,s,c,f;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Te();case 2:t=e.sent,n=t.app,r=t.store,o=t.router,i=!0,a=function(e){i=!1,window.location.href=e},s=window.location.href.replace(window.location.origin,""),c=[qe,ze],f=0;case 11:if(!(!0===i&&f<c.length)){e.next=29;break}if("function"===typeof c[f]){e.next=14;break}return e.abrupt("continue",26);case 14:return e.prev=14,e.next=17,c[f]({app:n,router:o,store:r,Vue:d["a"],ssrContext:null,redirect:a,urlPath:s});case 17:e.next=26;break;case 19:if(e.prev=19,e.t0=e["catch"](14),!e.t0||!e.t0.url){e.next=24;break}return window.location.href=e.t0.url,e.abrupt("return");case 24:return console.error("[Quasar] boot error:",e.t0),e.abrupt("return");case 26:f++,e.next=11;break;case 29:if(!1!==i){e.next=31;break}return e.abrupt("return");case 31:new d["a"](n);case 32:case"end":return e.stop()}}),e,null,[[14,19]])}))),Ye.apply(this,arguments)}Ke()},8832:function(e,t){}},[[0,1,2]]]);