(function(e){function t(t){for(var n,r,a=t[0],c=t[1],u=t[2],l=0,h=[];l<a.length;l++)r=a[l],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&h.push(i[r][0]),i[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);d&&d(t);while(h.length)h.shift()();return s.push.apply(s,u||[]),o()}function o(){for(var e,t=0;t<s.length;t++){for(var o=s[t],n=!0,r=1;r<o.length;r++){var c=o[r];0!==i[c]&&(n=!1)}n&&(s.splice(t--,1),e=a(a.s=o[0]))}return e}var n={},i={1:0},s=[];function r(e){return a.p+"js/"+({}[e]||e)+"."+{2:"7ae5ac14",3:"8307bcbc",4:"e5bd422c"}[e]+".js"}function a(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.e=function(e){var t=[],o=i[e];if(0!==o)if(o)t.push(o[2]);else{var n=new Promise((function(t,n){o=i[e]=[t,n]}));t.push(o[2]=n);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,a.nc&&c.setAttribute("nonce",a.nc),c.src=r(e);var u=new Error;s=function(t){c.onerror=c.onload=null,clearTimeout(l);var o=i[e];if(0!==o){if(o){var n=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+n+": "+s+")",u.name="ChunkLoadError",u.type=n,u.request=s,o[1](u)}i[e]=void 0}};var l=setTimeout((function(){s({type:"timeout",target:c})}),12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(t)},a.m=e,a.c=n,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(o,n,function(t){return e[t]}.bind(null,n));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/GEvenTDemo/",a.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var d=u;s.push([0,0]),o()})({0:function(e,t,o){e.exports=o("2f39")},"0047":function(e,t,o){},"2f39":function(e,t,o){"use strict";o.r(t);var n={};o.r(n),o.d(n,"checkLivePosition",(function(){return j}));var i={};o.r(i),o.d(i,"authenticate",(function(){return S})),o.d(i,"setUserPosition",(function(){return B})),o.d(i,"setWatchPositionId",(function(){return x})),o.d(i,"updateLivePositionTracking",(function(){return H})),o.d(i,"updateLiveViewTracking",(function(){return _})),o.d(i,"updatePoIEditing",(function(){return W})),o.d(i,"updateSubscription",(function(){return F})),o.d(i,"setBounds",(function(){return R})),o.d(i,"setGeohashesAndPrecision",(function(){return Q})),o.d(i,"resetGeohashes",(function(){return q}));var s={};o.r(s),o.d(s,"checkGeolocationAvailability",(function(){return J})),o.d(s,"setPositionIDAndCreatePositionListener",(function(){return $})),o.d(s,"resetPositionIDGeohashesPrecisionAndDeletePositionListener",(function(){return z}));var r={};o.r(r),o.d(r,"PoIsIdList",(function(){return X}));var a={};o.r(a),o.d(a,"addPoIs",(function(){return Z})),o.d(a,"removePoIs",(function(){return ee})),o.d(a,"addPoIToDatabase",(function(){return te})),o.d(a,"removePoIFromDatabase",(function(){return oe}));o("985d"),o("0047");var c=o("2b0e"),u=o("1f91"),l=o("b05d"),d=o("9989"),h=o("4d5a"),p=o("09e3"),m=o("9c40"),f=o("de5e"),g=o("05c0"),P=o("0016"),v=o("2a19"),b=o("f508");c["a"].use(l["a"],{config:{},lang:u["a"],components:{QPage:d["a"],QLayout:h["a"],QPageContainer:p["a"],QBtn:m["a"],QPageSticky:f["a"],QTooltip:g["a"],QIcon:P["a"]},plugins:{Notify:v["a"],Loading:b["a"]}});var w=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"q-app"}},[o("router-view"),o("Notify")],1)},I=[],k=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div")},y=[],L=o("2f62"),O={name:"Notify",computed:{...Object(L["d"])(["Notifies"])},watch:{Notifies(e,t){e.filter(e=>!t.includes(e)).forEach(e=>this.$q.notify({type:e.type,icon:this.Icons.mdiAlertCircleOutline,progress:!0,message:e.Notify.message,closeBtn:!0})),e.length&&this.resetNotifies()}},methods:{...Object(L["c"])(["resetNotifies"])}},U=O,M=o("2877"),A=Object(M["a"])(U,k,y,!1,null,null,null),V=A.exports,C={name:"App",components:{Notify:V}},T=C,G=Object(M["a"])(T,w,I,!1,null,null,null),E=G.exports,N={state:{Notifies:[]},mutations:{addNotifies(e,t){e.Notifies=e.Notifies.concat(t)},resetNotifies(e){e.Notifies=[]}}},D=function(){return{Authenticated:null,WatchPositionId:null,Position:{lat:null,lng:null},Bounds:{south:null,west:null,north:null,east:null},Geohashes:[],Precision:null,GeolocationAvailable:!!navigator.geolocation,LivePositionTracking:!1,LiveViewTracking:!1,PoIEditing:!1,Subscription:!1}};function j(e){return e.LivePositionTracking&&!!e.Position.lat&&!!e.Position.lng}function S(e,t){e.Authenticated=t}function B(e,t){e.Position=t}function x(e,t){e.WatchPositionId=t}function H(e,t){e.LivePositionTracking=t}function _(e,t){e.LiveViewTracking=t}function W(e,t){e.PoIEditing=t}function F(e,t){e.Subscription=t}function R(e,t){e.Bounds=t}function Q(e,t){e.Precision=t.precision,e.Geohashes=t.bboxes}function q(e){e.Geohashes=[]}function J({commit:e,state:t}){t.GeolocationAvailable||e("addNotifies",[{Notify:new Error("Location is not supported by this browser/device."),type:"warning"}],{root:!0})}function $({commit:e,state:t}){e("setWatchPositionId",navigator.geolocation.watchPosition(({coords:{latitude:o,longitude:n}})=>{t.Position.lat===o&&t.Position.lng===n||e("setUserPosition",{lat:o,lng:n})},t=>{let o="",n="";switch(e("updateLivePositionTracking",!1),t.code){case t.PERMISSION_DENIED:o="User denied the request for location.",n="warning";break;case t.POSITION_UNAVAILABLE:o="Your browser/device could not provide location.",n="warning";break;case t.TIMEOUT:o="The request to get location timed out.",n="negative";break;case t.UNKNOWN_ERROR:o="An unknown error occurred while trying to get location.",n="negative";break}e("addNotifies",[{Notify:new Error(o),type:n}],{root:!0})},{enableHighAccuracy:!0}))}function z({commit:e,state:t}){navigator.geolocation.clearWatch(t.WatchPositionId),e("setUserPosition",{lat:null,lng:null}),e("setWatchPositionId",null),e("resetGeohashes")}var K={namespaced:!0,state:D,getters:n,mutations:i,actions:s},Y=function(){return{PoIs:[],AddPoIToDatabase:{},RemovePoIFromDatabase:{}}};function X(e){return e.PoIs.map(({Id:e})=>e)}function Z(e,t){e.PoIs=e.PoIs.concat(t)}function ee(e,t){e.PoIs=e.PoIs.filter(({Id:e})=>!t.includes(e))}function te(e,t){e.AddPoIToDatabase=t}function oe(e,t){e.RemovePoIFromDatabase=t}var ne=o("8832"),ie={namespaced:!0,state:Y,getters:r,mutations:a,actions:ne},se=o("e02a");const re={1:[23,23],2:[2.8,5.6],3:[.7,.7],4:[.087,.18],5:[.022,.022],6:[.0027,.0055],7:[68e-5,68e-5],8:[85e-6,17e-5]},ae=Object.keys(re).reduce((e,t)=>Math.min(Number(e),Number(t))),ce=Object.keys(re).reduce((e,t)=>Math.max(Number(e),Number(t)));function ue({south:e,north:t,west:o,east:n}){const i=Math.abs(e-t),s=Math.abs(o-n),r=Object.entries(re).reverse().find(([,[e,t]])=>2*e>=i&&2*t>=s);return r?r[0]:ae}var le=e=>{e.registerModule("Geohash",{namespaced:!0,getters:{DecodeGeohashToBounds:()=>e=>Object(se["decode_bbox"])(e),GetGeohashesFromPoint:()=>(e,t)=>Object(se["encode"])(e,t,ce).split("").reduce((e,t,o)=>(e[o+1]=0!==o?e[o]+t:t,e),{})}}),e.watch(e=>e.User.Bounds,t=>{const o=ue(t);e.commit("User/setGeohashesAndPrecision",{bboxes:Object(se["bboxes"])(t.south,t.west,t.north,t.east,o),precision:o})})},de=o("59ca"),he=o.n(de);o("ea7b"),o("e71f");const pe=he.a.initializeApp({apiKey:"AIzaSyCaykC5gM4w33P9k3pIF-OohrE5JyVgPcw",authDomain:"gevent-270214.firebaseapp.com",databaseURL:"https://gevent-270214.firebaseio.com",projectId:"gevent-270214",storageBucket:"gevent-270214.appspot.com",messagingSenderId:"545035347256",appId:"1:545035347256:web:715c3c0047e80161868dcd"}).firestore(),me={Geohashes:[]};let fe=null;var ge=e=>{e.registerModule("Firestore",{namespaced:!0,actions:{signIn({state:e},{email:t,password:o}){return he.a.auth().signInWithEmailAndPassword(t,o)},signUp({state:t},{email:o,password:n}){return he.a.auth().createUserWithEmailAndPassword(o,n).then(()=>e.dispatch("Firestore/signIn",{email:o,password:n}))},signOut(){return he.a.auth().signOut()},delete(){return fe.delete()}}}),he.a.auth().onAuthStateChanged((function(t){t?(e.commit("User/authenticate",!0),fe=t):(e.commit("User/authenticate",!1),fe=null)})),e.watch(e=>e.User.Geohashes,t=>{const o=me.Geohashes.filter(({Hash:e})=>!t.includes(e));o.forEach(e=>{e.Unsubscribe(),me.Geohashes.splice(me.Geohashes.indexOf(e),1)});const n=e.state.PoIs.PoIs.filter(o=>!t.includes(o[e.state.User.Precision])).map(({Id:e})=>e);n.length&&e.commit("PoIs/removePoIs",n),t.filter(e=>!me.Geohashes.map(({Hash:e})=>e).includes(e)).forEach(t=>me.Geohashes.push({Hash:t,Unsubscribe:pe.collection("PoIs").where(e.state.User.Precision.toString(),"==",t).onSnapshot(t=>{let o=[];const n=[],i=[];t.docChanges().forEach(e=>{let t=e.doc.data();switch(t={Id:e.doc.id,lat:t.position.latitude,lng:t.position.longitude,...t},e.type){case"added":o.push(t);break;case"modified":n.push(t);break;case"removed":i.push(t.Id);break}}),o=o.filter(({Id:t})=>!e.getters["PoIs/PoIsIdList"].includes(t)),o.length>0&&e.commit("PoIs/addPoIs",o),i.length>0&&e.commit("PoIs/removePoIs",i)})}))}),e.watch(e=>e.PoIs.AddPoIToDatabase,({lat:t,lng:o})=>{pe.collection("PoIs").doc().set({position:new he.a.firestore.GeoPoint(t,o),...e.getters["Geohash/GetGeohashesFromPoint"](t,o)})}),e.watch(e=>e.PoIs.RemovePoIFromDatabase,e=>{pe.collection("PoIs").doc(e).delete()})},Pe=e=>{e.watch(e=>e.User.LivePositionTracking,t=>{t?e.dispatch("User/setPositionIDAndCreatePositionListener"):e.dispatch("User/resetPositionIDGeohashesPrecisionAndDeletePositionListener"),e.commit("User/updateLiveViewTracking",t)}),e.watch(e=>e.User.Authenticated,t=>{t||e.commit("User/updatePoIEditing",!1)})};c["a"].use(L["a"]);var ve=function(){const e=new L["a"].Store({state:{...N.state},mutations:{...N.mutations},modules:{User:K,PoIs:ie},plugins:[le,ge],strict:!1});return Pe(e),e},be=o("8c4f");const we=[{path:"/",component:()=>Promise.all([o.e(0),o.e(2)]).then(o.bind(null,"713b")),children:[{path:"",component:()=>Promise.all([o.e(0),o.e(4)]).then(o.bind(null,"8b24"))}]}];we.push({path:"*",component:()=>Promise.all([o.e(0),o.e(3)]).then(o.bind(null,"e51e"))});var Ie=we;c["a"].use(be["a"]);var ke=function(){const e=new be["a"]({scrollBehavior:()=>({x:0,y:0}),routes:Ie,mode:"history",base:"/GEvenTDemo/"});return e},ye=async function(){const e="function"===typeof ve?await ve({Vue:c["a"]}):ve,t="function"===typeof ke?await ke({Vue:c["a"],store:e}):ke;e.$router=t;const o={router:t,store:e,render:e=>e(E),el:"#q-app"};return{app:o,store:e,router:t}},Le=o("3400");const Oe=1e3;let Ue={},Me={},Ae={},Ve=[],Ce={},Te={},Ge={};const Ee=async(e,t,o)=>{Te=t,Ge=o,Ue=await window.initPromiseGoogleMaps,Me=new Ue.maps.Map(e,{disableDefaultUI:!0,zoom:2,center:{lat:0,lng:0},clickableIcons:!1});const n=new Ue.maps.GroundOverlay("statics/handsome.png",{north:38.2,south:38.19988,east:26.74,west:26.7395},{clickable:!1});n.setMap(Me),Ae=new Ue.maps.Marker({map:Me,position:{lat:0,lng:0},visible:!1,clickable:!1,icon:{anchor:new Ue.maps.Point(12.5,22.5),path:Te.UserMarkerIcon,fillColor:Ge.MarkerColor,fillOpacity:1,scale:.75,strokeColor:"white",strokeWeight:2,strokeOpacity:.8}}),Ce=new Le["a"](Me,[],{averageCenter:!0,ignoreHidden:!0,imagePath:"statics/map_icons/m"})};var Ne=({store:e,Vue:t})=>{const o=()=>{if(e.getters["User/checkLivePosition"]){const t=t=>Ue.maps.geometry.spherical.computeOffset(new Ue.maps.LatLng(e.state.User.Position),Oe,t);e.commit("User/setBounds",{south:t(180).lat(),west:t(270).lng(),north:t(0).lat(),east:t(90).lng()})}else e.commit("User/setBounds",Me.getBounds().toJSON())},n=t=>!e.getters["User/checkLivePosition"]||Ue.maps.geometry.spherical.computeDistanceBetween(new Ue.maps.LatLng(e.state.User.Position),new Ue.maps.LatLng(t))<=Oe;e.watch(e=>e.User.Position,t=>{e.getters["User/checkLivePosition"]?(o(),Ae.setPosition(t),Ae.setVisible(!0)):Ae.setVisible(!1);const i=e.getters["User/checkLivePosition"]?Ve.filter(({Marker:e})=>n(e.getPosition().toJSON())):Ve;Ve.forEach(e=>{const t=i.includes(e);t!==e.Marker.getVisible()&&e.Marker.setVisible(t)}),Ce.repaint()}),e.watch(e=>e.User.Bounds,t=>{e.state.User.LiveViewTracking&&Me.fitBounds(t,0)}),e.watch(e=>e.User.LiveViewTracking,t=>{t?(e.getters["User/checkLivePosition"]&&Me.fitBounds(e.state.User.Bounds,0),Me.addListener("dragstart",()=>e.commit("User/updateLiveViewTracking",!1)),Me.addListener("dblclick",()=>e.commit("User/updateLiveViewTracking",!1)),Ue.maps.event.addDomListener(Me.getDiv(),"mousewheel",()=>e.commit("User/updateLiveViewTracking",!1)),Ce.addListener("click",()=>e.commit("User/updateLiveViewTracking",!1))):(Ue.maps.event.clearListeners(Me,"dblclick"),Ue.maps.event.clearListeners(Me,"dragstart"),Ue.maps.event.clearListeners(Me.getDiv(),"mousewheel"),Ue.maps.event.clearListeners(Ce,"click"))}),e.watch(e=>e.User.PoIEditing,t=>{t?Me.addListener("click",({latLng:t})=>{e.commit("PoIs/addPoIToDatabase",t.toJSON())}):Ue.maps.event.clearListeners(Me,"click"),Ve.forEach(({Marker:e})=>e.setClickable(t))}),e.watch(e=>e.PoIs.PoIs,t=>{const o=Ve.map(({Id:e})=>e),i=t.filter(({Id:e})=>!o.includes(e));i.length&&(Ve=Ve.concat(i.map(t=>{const o=new Ue.maps.Marker({map:Me,position:t,visible:!e.getters["User/checkLivePosition"]||n(t),clickable:e.state.User.PoIEditing,icon:{anchor:new Ue.maps.Point(12.5,22.5),path:Te.MarkerIcon,fillColor:Ge.MarkerColor,fillOpacity:1,scale:1.5,strokeColor:"white",strokeWeight:2,strokeOpacity:.8}});return o.addListener("click",()=>{e.commit("PoIs/removePoIFromDatabase",t.Id)}),Ce.addMarker(o),{Id:t.Id,Marker:o}})));const s=o.filter(t=>!e.getters["PoIs/PoIsIdList"].includes(t));if(s.length){const e=Ve.filter(({Id:e})=>s.includes(e));e.forEach(({Marker:e})=>{Ue.maps.event.clearListeners(e,"click"),Ce.removeMarker(e)}),e.forEach(({Marker:e})=>e.setMap(null));const t=e.map(({Id:e})=>e);Ve=Ve.filter(({Id:e})=>!t.includes(e))}}),e.watch(e=>e.User.Subscription,t=>t?o():e.commit("User/resetGeohashes")),t.prototype.$createMap=Ee},De=o("bc78"),je=o("e519"),Se=async({Vue:e})=>{e.mixin({beforeCreate:function(){this.Colors={Primary:De["a"].getBrand("primary")},this.Icons={mdiCircle:je["f"],mdiMapMarker:je["r"],mdiCancel:je["e"],mdiTargetVariant:je["u"],mdiMapMarkerPlusOutline:je["t"],mdiMapMarkerMinusOutline:je["s"],mdiLockOutline:je["n"],mdiLockOpenVariantOutline:je["m"],mdiCrosshairsGps:je["i"],mdiCrosshairs:je["h"],mdiAlertCircleOutline:je["c"],mdiLoginVariant:je["p"],mdiAccountPlusOutline:je["b"],mdiLockReset:je["o"],mdiCardAccountDetailsOutline:"M22,3H2C0.91,3.04 0.04,3.91 0,5V19C0.04,20.09 0.91,20.96 2,21H22C23.09,20.96 23.96,20.09 24,19V5C23.96,3.91 23.09,3.04 22,3M22,19H2V5H22V19M14,17V15.75C14,14.09 10.66,13.25 9,13.25C7.34,13.25 4,14.09 4,15.75V17H14M9,7A2.5,2.5 0 0,0 6.5,9.5A2.5,2.5 0 0,0 9,12A2.5,2.5 0 0,0 11.5,9.5A2.5,2.5 0 0,0 9,7M14,7V8H20V7H14M14,9V10H20V9H14M14,11V12H18V11H14",mdiCloseCircleOutline:je["g"],mdiAt:je["d"],mdiKeyOutline:je["l"],mdiAccountOutline:je["a"],mdiLogoutVariant:je["q"],mdiFaceProfile:je["k"],mdiDeleteOutline:je["j"]}}})};const Be="/GEvenTDemo/",xe=/\/\//,He=e=>(Be+e).replace(xe,"/");async function _e(){const{app:e,store:t,router:o}=await ye();let n=!1;const i=e=>{n=!0;const t=Object(e)===e?He(o.resolve(e).route.fullPath):e;window.location.href=t},s=window.location.href.replace(window.location.origin,""),r=[Ne,Se];for(let u=0;!1===n&&u<r.length;u++)if("function"===typeof r[u])try{await r[u]({app:e,router:o,store:t,Vue:c["a"],ssrContext:null,redirect:i,urlPath:s,publicPath:Be})}catch(a){return a&&a.url?void(window.location.href=a.url):void console.error("[Quasar] boot error:",a)}!0!==n&&new c["a"](e)}_e()},8832:function(e,t){}});