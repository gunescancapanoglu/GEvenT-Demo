(function(e){function t(t){for(var n,r,a=t[0],c=t[1],l=t[2],u=0,h=[];u<a.length;u++)r=a[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&h.push(i[r][0]),i[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);d&&d(t);while(h.length)h.shift()();return s.push.apply(s,l||[]),o()}function o(){for(var e,t=0;t<s.length;t++){for(var o=s[t],n=!0,r=1;r<o.length;r++){var c=o[r];0!==i[c]&&(n=!1)}n&&(s.splice(t--,1),e=a(a.s=o[0]))}return e}var n={},i={1:0},s=[];function r(e){return a.p+"js/"+({}[e]||e)+"."+{2:"e53cfd9c",3:"8307bcbc",4:"10d33c8a"}[e]+".js"}function a(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.e=function(e){var t=[],o=i[e];if(0!==o)if(o)t.push(o[2]);else{var n=new Promise((function(t,n){o=i[e]=[t,n]}));t.push(o[2]=n);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,a.nc&&c.setAttribute("nonce",a.nc),c.src=r(e);var l=new Error;s=function(t){c.onerror=c.onload=null,clearTimeout(u);var o=i[e];if(0!==o){if(o){var n=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+s+")",l.name="ChunkLoadError",l.type=n,l.request=s,o[1](l)}i[e]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:c})}),12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(t)},a.m=e,a.c=n,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(o,n,function(t){return e[t]}.bind(null,n));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/GEvenTDemo/",a.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var d=l;s.push([0,0]),o()})({0:function(e,t,o){e.exports=o("2f39")},"0047":function(e,t,o){},"2f39":function(e,t,o){"use strict";o.r(t);var n={};o.r(n),o.d(n,"checkLivePosition",(function(){return V}));var i={};o.r(i),o.d(i,"setUserPosition",(function(){return S})),o.d(i,"setWatchPositionId",(function(){return B})),o.d(i,"updateLivePositionTracking",(function(){return x})),o.d(i,"updateLiveViewTracking",(function(){return _})),o.d(i,"updatePoIEditing",(function(){return W})),o.d(i,"updateSubscription",(function(){return F})),o.d(i,"setBounds",(function(){return Q})),o.d(i,"setGeohashesAndPrecision",(function(){return R})),o.d(i,"resetGeohashes",(function(){return q}));var s={};o.r(s),o.d(s,"checkGeolocationAvailability",(function(){return J})),o.d(s,"setPositionIDAndCreatePositionListener",(function(){return H})),o.d(s,"resetPositionIDGeohashesPrecisionAndDeletePositionListener",(function(){return $}));var r={};o.r(r),o.d(r,"PoIsIdList",(function(){return Y}));var a={};o.r(a),o.d(a,"addPoIs",(function(){return X})),o.d(a,"removePoIs",(function(){return Z})),o.d(a,"addPoIToDatabase",(function(){return ee})),o.d(a,"removePoIFromDatabase",(function(){return te}));o("985d"),o("0047");var c=o("2b0e"),l=o("1f91"),u=o("b05d"),d=o("9989"),h=o("4d5a"),p=o("09e3"),f=o("9c40"),m=o("de5e"),g=o("05c0"),P=o("0016"),v=o("2a19"),b=o("f508");c["a"].use(u["a"],{config:{},lang:l["a"],components:{QPage:d["a"],QLayout:h["a"],QPageContainer:p["a"],QBtn:f["a"],QPageSticky:m["a"],QTooltip:g["a"],QIcon:P["a"]},plugins:{Notify:v["a"],Loading:b["a"]}});var I=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"q-app"}},[o("router-view"),o("Notify")],1)},w=[],k=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div")},y=[],L=o("2f62"),O={name:"Notify",computed:{...Object(L["d"])(["Notifies"])},watch:{Notifies(e,t){e.filter(e=>!t.includes(e)).forEach(e=>this.$q.notify({type:e.type,icon:this.Icons.mdiAlertCircleOutline,progress:!0,message:e.Notify.message,closeBtn:!0})),e.length&&this.resetNotifies()}},methods:{...Object(L["c"])(["resetNotifies"])}},U=O,M=o("2877"),T=Object(M["a"])(U,k,y,!1,null,null,null),G=T.exports,N={name:"App",components:{Notify:G}},E=N,D=Object(M["a"])(E,I,w,!1,null,null,null),C=D.exports,j={state:{Notifies:[]},mutations:{addNotifies(e,t){e.Notifies=e.Notifies.concat(t)},resetNotifies(e){e.Notifies=[]}}},A=function(){return{WatchPositionId:null,Position:{lat:null,lng:null},Bounds:{south:null,west:null,north:null,east:null},Geohashes:[],Precision:null,GeolocationAvailable:!!navigator.geolocation,LivePositionTracking:!1,LiveViewTracking:!1,PoIEditing:!1,Subscription:!1}};function V(e){return e.LivePositionTracking&&!!e.Position.lat&&!!e.Position.lng}function S(e,t){e.Position=t}function B(e,t){e.WatchPositionId=t}function x(e,t){e.LivePositionTracking=t}function _(e,t){e.LiveViewTracking=t}function W(e,t){e.PoIEditing=t}function F(e,t){e.Subscription=t}function Q(e,t){e.Bounds=t}function R(e,t){e.Precision=t.precision,e.Geohashes=t.bboxes}function q(e){e.Geohashes=[]}function J({commit:e,state:t}){t.GeolocationAvailable||e("addNotifies",[{Notify:new Error("Location is not supported by this browser/device."),type:"warning"}],{root:!0})}function H({commit:e,state:t}){e("setWatchPositionId",navigator.geolocation.watchPosition(({coords:{latitude:o,longitude:n}})=>{t.Position.lat===o&&t.Position.lng===n||e("setUserPosition",{lat:o,lng:n})},t=>{let o="",n="";switch(e("updateLivePositionTracking",!1),t.code){case t.PERMISSION_DENIED:o="User denied the request for location.",n="warning";break;case t.POSITION_UNAVAILABLE:o="Your browser/device could not provide location.",n="warning";break;case t.TIMEOUT:o="The request to get location timed out.",n="negative";break;case t.UNKNOWN_ERROR:o="An unknown error occurred while trying to get location.",n="negative";break}e("addNotifies",[{Notify:new Error(o),type:n}],{root:!0})},{enableHighAccuracy:!0}))}function $({commit:e,state:t}){navigator.geolocation.clearWatch(t.WatchPositionId),e("setUserPosition",{lat:null,lng:null}),e("setWatchPositionId",null),e("resetGeohashes")}var z={namespaced:!0,state:A,getters:n,mutations:i,actions:s},K=function(){return{PoIs:[],AddPoIToDatabase:{},RemovePoIFromDatabase:{}}};function Y(e){return e.PoIs.map(({Id:e})=>e)}function X(e,t){e.PoIs=e.PoIs.concat(t)}function Z(e,t){e.PoIs=e.PoIs.filter(({Id:e})=>!t.includes(e))}function ee(e,t){e.AddPoIToDatabase=t}function te(e,t){e.RemovePoIFromDatabase=t}var oe=o("8832"),ne={namespaced:!0,state:K,getters:r,mutations:a,actions:oe},ie=o("e02a");const se={1:[23,23],2:[2.8,5.6],3:[.7,.7],4:[.087,.18],5:[.022,.022],6:[.0027,.0055],7:[68e-5,68e-5],8:[85e-6,17e-5]},re=Object.keys(se).reduce((e,t)=>Math.min(Number(e),Number(t))),ae=Object.keys(se).reduce((e,t)=>Math.max(Number(e),Number(t)));function ce({south:e,north:t,west:o,east:n}){const i=Math.abs(e-t),s=Math.abs(o-n),r=Object.entries(se).reverse().find(([,[e,t]])=>2*e>=i&&2*t>=s);return r?r[0]:re}var le=e=>{e.registerModule("Geohash",{getters:{DecodeGeohashToBounds:()=>e=>Object(ie["decode_bbox"])(e),GetGeohashesFromPoint:()=>(e,t)=>Object(ie["encode"])(e,t,ae).split("").reduce((e,t,o)=>(e[o+1]=0!==o?e[o]+t:t,e),{})}}),e.watch(e=>e.User.Bounds,t=>{const o=ce(t);e.commit("User/setGeohashesAndPrecision",{bboxes:Object(ie["bboxes"])(t.south,t.west,t.north,t.east,o),precision:o})})},ue=o("59ca"),de=o.n(ue);o("e71f");const he=de.a.initializeApp({apiKey:"AIzaSyCaykC5gM4w33P9k3pIF-OohrE5JyVgPcw",authDomain:"gevent-270214.firebaseapp.com",databaseURL:"https://gevent-270214.firebaseio.com",projectId:"gevent-270214",storageBucket:"gevent-270214.appspot.com",messagingSenderId:"545035347256",appId:"1:545035347256:web:715c3c0047e80161868dcd"}).firestore(),pe={Geohashes:[]};var fe=e=>{e.watch(e=>e.User.Geohashes,t=>{const o=pe.Geohashes.filter(({Hash:e})=>!t.includes(e));o.forEach(e=>{e.Unsubscribe(),pe.Geohashes.splice(pe.Geohashes.indexOf(e),1)});const n=e.state.PoIs.PoIs.filter(o=>!t.includes(o[e.state.User.Precision])).map(({Id:e})=>e);n.length&&e.commit("PoIs/removePoIs",n),t.filter(e=>!pe.Geohashes.map(({Hash:e})=>e).includes(e)).forEach(t=>pe.Geohashes.push({Hash:t,Unsubscribe:he.collection("PoIs").where(e.state.User.Precision.toString(),"==",t).onSnapshot(t=>{let o=[];const n=[],i=[];t.docChanges().forEach(e=>{let t=e.doc.data();switch(t={Id:e.doc.id,lat:t.position.latitude,lng:t.position.longitude,...t},e.type){case"added":o.push(t);break;case"modified":n.push(t);break;case"removed":i.push(t.Id);break}}),o=o.filter(({Id:t})=>!e.getters["PoIs/PoIsIdList"].includes(t)),o.length>0&&e.commit("PoIs/addPoIs",o),i.length>0&&e.commit("PoIs/removePoIs",i)})}))}),e.watch(e=>e.PoIs.AddPoIToDatabase,({lat:t,lng:o})=>{he.collection("PoIs").doc().set({position:new de.a.firestore.GeoPoint(t,o),...e.getters.GetGeohashesFromPoint(t,o)})}),e.watch(e=>e.PoIs.RemovePoIFromDatabase,e=>{he.collection("PoIs").doc(e).delete()})},me=e=>{e.watch(e=>e.User.LivePositionTracking,t=>{t?e.dispatch("User/setPositionIDAndCreatePositionListener"):e.dispatch("User/resetPositionIDGeohashesPrecisionAndDeletePositionListener"),e.commit("User/updateLiveViewTracking",t)})};c["a"].use(L["a"]);var ge=function(){const e=new L["a"].Store({state:{...j.state},mutations:{...j.mutations},modules:{User:z,PoIs:ne},plugins:[le,fe],strict:!1});return me(e),e},Pe=o("8c4f");const ve=[{path:"/",component:()=>Promise.all([o.e(0),o.e(2)]).then(o.bind(null,"713b")),children:[{path:"",component:()=>Promise.all([o.e(0),o.e(4)]).then(o.bind(null,"8b24"))}]}];ve.push({path:"*",component:()=>Promise.all([o.e(0),o.e(3)]).then(o.bind(null,"e51e"))});var be=ve;c["a"].use(Pe["a"]);var Ie=function(){const e=new Pe["a"]({scrollBehavior:()=>({x:0,y:0}),routes:be,mode:"history",base:"/GEvenTDemo/"});return e},we=async function(){const e="function"===typeof ge?await ge({Vue:c["a"]}):ge,t="function"===typeof Ie?await Ie({Vue:c["a"],store:e}):Ie;e.$router=t;const o={router:t,store:e,render:e=>e(C),el:"#q-app"};return{app:o,store:e,router:t}},ke=o("3400");const ye=1e3;let Le={},Oe={},Ue={},Me=[],Te={},Ge={},Ne={};const Ee=async(e,t,o)=>{Ge=t,Ne=o,Le=await window.initPromiseGoogleMaps,Oe=new Le.maps.Map(e,{disableDefaultUI:!0,zoom:2,center:{lat:0,lng:0},clickableIcons:!1});const n=new Le.maps.GroundOverlay("statics/handsome.png",{north:38.2,south:38.19988,east:26.74,west:26.7395},{clickable:!1});n.setMap(Oe),Ue=new Le.maps.Marker({map:Oe,position:{lat:0,lng:0},visible:!1,clickable:!1,icon:{anchor:new Le.maps.Point(12.5,22.5),path:Ge.UserMarkerIcon,fillColor:Ne.MarkerColor,fillOpacity:1,scale:.75,strokeColor:"white",strokeWeight:2,strokeOpacity:.8}}),Te=new ke["a"](Oe,[],{averageCenter:!0,ignoreHidden:!0,imagePath:"statics/map_icons/m"})};var De=({store:e,Vue:t})=>{const o=()=>{if(e.getters["User/checkLivePosition"]){const t=t=>Le.maps.geometry.spherical.computeOffset(new Le.maps.LatLng(e.state.User.Position),ye,t);e.commit("User/setBounds",{south:t(180).lat(),west:t(270).lng(),north:t(0).lat(),east:t(90).lng()})}else e.commit("User/setBounds",Oe.getBounds().toJSON())},n=t=>!e.getters["User/checkLivePosition"]||Le.maps.geometry.spherical.computeDistanceBetween(new Le.maps.LatLng(e.state.User.Position),new Le.maps.LatLng(t))<=ye;e.watch(e=>e.User.Position,t=>{e.getters["User/checkLivePosition"]?(o(),Ue.setPosition(t),Ue.setVisible(!0)):Ue.setVisible(!1);const i=e.getters["User/checkLivePosition"]?Me.filter(({Marker:e})=>n(e.getPosition().toJSON())):Me;Me.forEach(e=>{const t=i.includes(e);t!==e.Marker.getVisible()&&e.Marker.setVisible(t)}),Te.repaint()}),e.watch(e=>e.User.Bounds,t=>{e.state.User.LiveViewTracking&&Oe.fitBounds(t,0)}),e.watch(e=>e.User.LiveViewTracking,t=>{t?(e.getters["User/checkLivePosition"]&&Oe.fitBounds(e.state.User.Bounds,0),Oe.addListener("dragstart",()=>e.commit("User/updateLiveViewTracking",!1)),Oe.addListener("dblclick",()=>e.commit("User/updateLiveViewTracking",!1)),Le.maps.event.addDomListener(Oe.getDiv(),"mousewheel",()=>e.commit("User/updateLiveViewTracking",!1)),Te.addListener("click",()=>e.commit("User/updateLiveViewTracking",!1))):(Le.maps.event.clearListeners(Oe,"dblclick"),Le.maps.event.clearListeners(Oe,"dragstart"),Le.maps.event.clearListeners(Oe.getDiv(),"mousewheel"),Le.maps.event.clearListeners(Te,"click"))}),e.watch(e=>e.User.PoIEditing,t=>{t?Oe.addListener("click",({latLng:t})=>{e.commit("PoIs/addPoIToDatabase",t.toJSON())}):Le.maps.event.clearListeners(Oe,"click"),Me.forEach(({Marker:e})=>e.setClickable(t))}),e.watch(e=>e.PoIs.PoIs,t=>{const o=Me.map(({Id:e})=>e),i=t.filter(({Id:e})=>!o.includes(e));i.length&&(Me=Me.concat(i.map(t=>{const o=new Le.maps.Marker({map:Oe,position:t,visible:!e.getters["User/checkLivePosition"]||n(t),clickable:e.state.User.PoIEditing,icon:{anchor:new Le.maps.Point(12.5,22.5),path:Ge.MarkerIcon,fillColor:Ne.MarkerColor,fillOpacity:1,scale:1.5,strokeColor:"white",strokeWeight:2,strokeOpacity:.8}});return o.addListener("click",()=>{e.commit("PoIs/removePoIFromDatabase",t.Id)}),Te.addMarker(o),{Id:t.Id,Marker:o}})));const s=o.filter(t=>!e.getters["PoIs/PoIsIdList"].includes(t));if(s.length){const e=Me.filter(({Id:e})=>s.includes(e));e.forEach(({Marker:e})=>{Le.maps.event.clearListeners(e,"click"),Te.removeMarker(e)}),e.forEach(({Marker:e})=>e.setMap(null));const t=e.map(({Id:e})=>e);Me=Me.filter(({Id:e})=>!t.includes(e))}}),e.watch(e=>e.User.Subscription,t=>t?o():e.commit("User/resetGeohashes")),t.prototype.$createMap=Ee},Ce=o("bc78"),je=o("e519"),Ae=async({Vue:e})=>{e.mixin({beforeCreate:function(){this.Colors={Primary:Ce["a"].getBrand("primary")},this.Icons={mdiCircle:je["c"],mdiMapMarker:je["h"],mdiCancel:je["b"],mdiTargetVariant:je["k"],mdiMapMarkerPlusOutline:je["j"],mdiMapMarkerMinusOutline:je["i"],mdiLockOutline:je["g"],mdiLockOpenVariantOutline:je["f"],mdiCrosshairsGps:je["e"],mdiCrosshairs:je["d"],mdiAlertCircleOutline:je["a"]}}})};const Ve="/GEvenTDemo/",Se=/\/\//,Be=e=>(Ve+e).replace(Se,"/");async function xe(){const{app:e,store:t,router:o}=await we();let n=!1;const i=e=>{n=!0;const t=Object(e)===e?Be(o.resolve(e).route.fullPath):e;window.location.href=t},s=window.location.href.replace(window.location.origin,""),r=[De,Ae];for(let l=0;!1===n&&l<r.length;l++)if("function"===typeof r[l])try{await r[l]({app:e,router:o,store:t,Vue:c["a"],ssrContext:null,redirect:i,urlPath:s,publicPath:Ve})}catch(a){return a&&a.url?void(window.location.href=a.url):void console.error("[Quasar] boot error:",a)}!0!==n&&new c["a"](e)}xe()},8832:function(e,t){}});